<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WR Aromatizantes</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

</head>

<body>
  <header>
    <div class="logo">
      <img src="assets/Logo.png" alt="Logo">
      <h1>WR Aromatizantes</h1>
    </div>
    <nav>
      <ul>
        <li><a href="#home" id="home-link">Home</a></li>
        <li><a href="#produtos">Produtos</a></li>
        <li><a href="#contato">Contato</a></li>
        <li id="cart-btn">
          üõí <span id="cart-count">0</span>
        </li>
      </ul>
    </nav>
  </header>

  <section class="produtos-section" id="produtos">
    <h2>Nossos Aromatizantes</h2>
    <div class="filtros">
      <button class="filtro-btn active" data-categoria="todos">Todos</button>
      <button class="filtro-btn" data-categoria="500ml">500ml</button>
      <button class="filtro-btn" data-categoria="1 litro">1 litro</button>
    </div>

    <div class="produtos-container" id="produtos-container">
      <!-- Produtos renderizados dinamicamente -->
    </div>
  </section>

  <!-- Carrinho Modal -->
  <div class="cart-modal" id="cart-modal">
    <div class="cart-content">
      <h2>Seu Carrinho</h2>
      <div class="cart-items" id="cart-items"></div>
      <div class="cart-summary">
        <h3>Resumo</h3>
        <p>Total: <span id="total">R$ 0,00</span></p>
      </div>
      <input type="text" id="address" class="address-input" placeholder="Digite seu endere√ßo de entrega">
      <p class="address-warn" id="address-warn">Digite o endere√ßo para finalizar</p>
      <div class="cart-actions">
        <button class="btn" id="checkout-btn">Finalizar Pedido</button>
        <button class="btn btn-close" onclick="toggleCarrinho()">Fechar</button>
      </div>
    </div>
  </div>

  <footer id="contato">
    <div class="footer-content">
      <h3>Sobre N√≥s</h3>
      <p>WR Aromatizantes - especializada em fragr√¢ncias para ambientes desde 2025.</p>
    </div>

    <div class="footer-content">
      <h3>Redes Sociais</h3>
      <div class="social-icons">
        <a href="#"><i class="fab fa-facebook-f"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-whatsapp"></i></a>
      </div>
    </div>

    <div class="footer-bottom">
      <p>&copy; 2025 WR Aromatizantes. Todos os direitos reservados.</p>
    </div>
  </footer>


  <script>
    const produtos = JSON.parse(localStorage.getItem("produtos")) || [];
    let carrinho = [];
    const container = document.getElementById("produtos-container");
    const cartItems = document.getElementById("cart-items");
    const cartCount = document.getElementById("cart-count");
    const total = document.getElementById("total");

    function renderProdutos(filtro = "todos") {
      container.innerHTML = "";
      // Filtra por volume e por ativo
      const filtrados = produtos.filter(p => (p.ativo !== false)); // s√≥ ativos
      const filtradosPorVolume = filtro === "todos" ? filtrados : filtrados.filter(p => p.volume === filtro);

      filtradosPorVolume.forEach((p, index) => {
        const card = document.createElement("div");
        card.className = "produto-card";
        card.dataset.categoria = p.volume;
        card.innerHTML = `
      <img src="${p.imagem}" class="produto-img" alt="${p.nome}" />
      <div class="produto-info">
        <h3>${p.nome}</h3>
        <p>${p.descricao}</p>
        <span class="preco">R$ ${parseFloat(p.preco).toFixed(2)}</span>
        <button class="add-carrinho" onclick="adicionarCarrinho('${p.nome}')">Adicionar ao carrinho</button>
      </div>
    `;
        container.appendChild(card);
      });
    }



    function adicionarCarrinho(nome) {
      const item = produtos.find(p => p.nome === nome);
      if (!item) return;

      const existente = carrinho.find(p => p.nome === item.nome);
      if (existente) {
        existente.qtd++;
      } else {
        carrinho.push({ ...item, qtd: 1 });
      }
      atualizarCarrinho();
    }



    function atualizarCarrinho() {
      cartItems.innerHTML = "";
      let totalCompra = 0;
      carrinho.forEach((item, i) => {
        totalCompra += item.preco * item.qtd;
        const div = document.createElement("div");
        div.className = "cart-item";
        div.innerHTML = `
          <div class="cart-item-info">
            <img src="${item.imagem}" class="cart-item-img" />
            <div class="cart-item-details">
              <div class="cart-item-name">${item.nome}</div>
              <div class="cart-item-price">R$ ${item.preco.toFixed(2)}</div>
              <div class="cart-item-quantity">
                <button class="quantity-btn" onclick="alterarQtd(${i}, -1)">-</button>
                ${item.qtd}
                <button class="quantity-btn" onclick="alterarQtd(${i}, 1)">+</button>
              </div>
            </div>
            <div class="remove-item" onclick="removerItem(${i})">üóëÔ∏è</div>
          </div>
        `;
        cartItems.appendChild(div);
      });
      total.textContent = `R$ ${totalCompra.toFixed(2)}`;
      cartCount.textContent = carrinho.reduce((s, i) => s + i.qtd, 0);
    }

    function alterarQtd(i, qtd) {
      carrinho[i].qtd += qtd;
      if (carrinho[i].qtd <= 0) carrinho.splice(i, 1);
      atualizarCarrinho();
    }

    function removerItem(i) {
      carrinho.splice(i, 1);
      atualizarCarrinho();
    }

    function toggleCarrinho() {
      const modal = document.getElementById("cart-modal");
      if (modal.style.display === "flex") {
        modal.style.display = "none";
      } else {
        modal.style.display = "flex";
      }
    }



    document.getElementById("cart-btn").addEventListener("click", toggleCarrinho);

    document.getElementById("checkout-btn").addEventListener("click", () => {
  const endereco = document.getElementById("address").value.trim();
  const aviso = document.getElementById("address-warn");

  if (!endereco) {
    aviso.style.display = "block";
    return;
  }

  aviso.style.display = "none";

  // calcula o total dos produtos
  const totalItens = carrinho.reduce((acc, p) => acc + p.preco * p.qtd, 0);

  // l√≥gica de frete
  let frete = totalItens >= 100 ? 0 : 15.00;
  const totalComFrete = totalItens + frete;

  // monta a mensagem
  let msg = "üõí *Pedido WR Aromatizantes*%0A";
  carrinho.forEach(p => {
    msg += `${p.qtd}x ${p.nome} - R$ ${p.preco.toFixed(2)}%0A`;
  });

  msg += `%0AFrete: ${frete === 0 ? "Gr√°tis" : `R$ ${frete.toFixed(2)}`}`;
  msg += `%0ATotal (produtos + frete): R$ ${totalComFrete.toFixed(2)}`;
  msg += `%0AEndere√ßo de entrega: ${endereco}`;

  // abre o WhatsApp
  const url = `https://wa.me/5588999049636?text=${msg}`;
  window.open(url, "_blank");
});


    document.querySelectorAll('.filtro-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const categoria = btn.dataset.categoria;
        document.querySelectorAll('.filtro-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        renderProdutos(categoria);
      });
    });

    document.getElementById("home-link").addEventListener("click", e => {
      e.preventDefault();
      window.scrollTo({ top: 0, behavior: "smooth" });
    });


    renderProdutos();
  </script>
</body>

</html>